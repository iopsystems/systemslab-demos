#!/bin/bash

for PARTITIONS in 1 10 20; do
  for LINGERMS in 0 2 5; do
    for RPCPERF_THREADS in 8 16; do
      for RPCPERF_TASKS in 1000 2000 4000; do
        for TOPICS in 1 10; do
          for STORAGE in /mnt/gp3 /mnt/data-1; do             
            cmd="systemslab --systemslab-url http://localhost submit ./rpcperf-client1-server1-maxqps.jsonnet --param topics=$TOPICS --param partitions=$PARTITIONS --param storage=$STORAGE --param lingerms=$LINGERMS --param rpcperf_tasks=$RPCPERF_TASKS --param rpcperf_threads=$RPCPERF_THREADS"
            echo $cmd          
            $cmd >> kafka_client1_server1_maxqps.log
          done
        done
        #systemslab --systemslab-url http://localhost submit ./rpcperf-client1-server1-maxqps.jsonnet --param "partitions=$"  --param "lingerms=1" --param "rpcperf_tasks=1000" --param "rpcperf_threads=8"
      done
    done
  done
done
